
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旗遇世界：國旗大冒險</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 品牌標誌 -->
    <div class="brand-logo">VIBECODING GAMES BY SABRINA</div>

    <div class="container">
        <!-- 音效開關按鈕 -->
        <button id="sound-toggle" class="sound-toggle" onclick="toggleSound()" title="點擊關閉音效">🔊</button>

        <!-- 世界地圖按鈕 -->
        <button id="map-toggle" class="map-toggle" onclick="showWorldMap()" title="查看已解鎖的世界地圖">🗺️</button>

        <h1 id="page-title">🌍 旗遇世界：國旗大冒險 🌍</h1>

        <!-- 遊戲開始畫面 -->
        <div id="start-screen">
            <div class="welcome-text">
                <h2 id="welcome-title">歡迎來到旗遇世界！</h2>
                <p id="welcome-subtitle">「知識，就是你的護照。一起環遊世界，收集所有光榮。」</p>

                <!-- 名稱輸入 -->
                <div class="name-input-section">
                    <label id="name-label">請輸入您的名稱：</label>
                    <input type="text" id="name-input" placeholder="輸入名稱" maxlength="20">
                </div>

                <button id="enter-stage-btn" class="btn btn-primary" onclick="enterStageSelect()">🎮 進入闖關模式</button>
                <button id="daily-challenge-btn" class="btn btn-daily" onclick="startDailyChallenge()">
                    <span id="daily-challenge-text">📅 每日挑戰</span>
                    <span id="daily-status" class="daily-status"></span>
                </button>
                <button id="clear-progress-btn" class="btn btn-secondary" onclick="ProgressManager.clearAllProgress()" style="font-size: 0.85em; padding: 8px 16px; margin-top: 10px;">🗑️ <span id="clear-progress-text">清除所有進度</span></button>
            </div>
        </div>

        <!-- 關卡選擇畫面 -->
        <div id="stage-select-screen" class="hidden">
            <h2 id="stage-select-title">🎯 選擇關卡</h2>
            <p id="stage-select-subtitle">通過每個關卡解鎖下一關！</p>

            <div id="stages-container" class="stages-container">
                <!-- 關卡將由 JavaScript 動態生成 -->
            </div>

            <button id="back-to-start-btn" class="btn btn-secondary" onclick="backToStart()">返回</button>
        </div>

        <!-- 遊戲進行畫面 -->
        <div id="game-screen" class="hidden">
            <!-- 關卡資訊 -->
            <div class="stage-info-banner">
                <span id="stage-number">第 1 關</span>
                <span class="separator">|</span>
                <span id="stage-name">新手訓練營</span>
            </div>

            <!-- 遊戲狀態列 -->
            <div class="game-status">
                <div class="status-item">
                    <span class="label" id="question-label">題號：</span>
                    <span id="question-number">1</span>/<span id="total-questions">10</span>
                </div>
                <div class="status-item">
                    <span class="label" id="score-label">得分：</span>
                    <span id="current-score">0</span>
                </div>
                <div class="status-item">
                    <span class="label" id="lives-label">剩餘機會：</span>
                    <span id="lives">❤️❤️❤️</span>
                </div>
                <div class="status-item">
                    <span class="label" id="max-score-label">本題最高分：</span>
                    <span id="max-score">10</span>
                </div>
            </div>

            <!-- 國旗顯示區 -->
            <div class="flag-display">
                <div id="flag-emoji">🇹🇼</div>
                <p class="question-text" id="question-text">請猜猜這是哪個國家的國旗？</p>
            </div>

            <!-- 提示區域 -->
            <div id="hints-area" class="hints-area">
                <div id="hint1" class="hint hidden"></div>
                <div id="hint2" class="hint hidden"></div>
                <div id="hint3" class="hint hidden"></div>
                <div id="hint4" class="hint hidden"></div>
                <div id="hint5" class="hint hidden"></div>
            </div>

            <!-- 回饋訊息區 -->
            <div id="feedback" class="feedback hidden"></div>

            <!-- 選項按鈕區 -->
            <div class="options-area" id="options-area">
                <!-- 選項將由 JavaScript 動態生成 -->
            </div>

            <!-- 提示按鈕區 -->
            <div class="hint-buttons">
                <button id="hint-btn-1" class="btn btn-hint" onclick="showHint(1)">提示 1</button>
                <button id="hint-btn-2" class="btn btn-hint" onclick="showHint(2)">提示 2</button>
                <button id="hint-btn-3" class="btn btn-hint" onclick="showHint(3)">提示 3</button>
                <button id="hint-btn-4" class="btn btn-hint" onclick="showHint(4)">提示 4</button>
                <button id="hint-btn-5" class="btn btn-hint" onclick="showHint(5)">提示 5</button>
            </div>

            <!-- 下一題和停止按鈕 -->
            <div class="game-control-buttons">
                <button id="next-btn" class="btn btn-primary hidden" onclick="nextQuestion()">下一題</button>
                <button id="quit-btn" class="btn btn-secondary" onclick="quitChallenge()">⏸️ 停止挑戰</button>
            </div>
        </div>

        <!-- 遊戲結束畫面 -->
        <div id="end-screen" class="hidden">
            <h2 id="end-title">遊戲結束！</h2>
            <div class="final-result">
                <div class="final-score">
                    <h3 id="final-score-label">最終得分</h3>
                    <div id="final-score-value">0</div>
                </div>
                <div class="title-section">
                    <h3 id="title-label">您的國旗頭銜</h3>
                    <div id="title-badge"></div>
                    <p id="title-description"></p>
                </div>
            </div>
            <div class="end-buttons">
                <button id="next-stage-btn" class="btn btn-primary hidden" onclick="goToNextStage()">🚀 前往下一關</button>
                <button id="back-to-stage-btn" class="btn btn-primary" onclick="backToStageSelect()">返回關卡選擇</button>
                <button id="share-game-btn" class="btn btn-secondary" onclick="shareGame()">📤 分享遊戲</button>
            </div>
        </div>

        <!-- 排行榜畫面 -->
        <div id="leaderboard-screen" class="hidden">
            <h2 id="leaderboard-title">🏆 排行榜</h2>

            <!-- 難度選擇器 -->
            <div class="leaderboard-filter">
                <button class="filter-btn active" onclick="filterLeaderboard('all', this)">
                    <span id="filter-all">全部</span>
                </button>
                <button class="filter-btn" onclick="filterLeaderboard('beginner', this)">
                    <span id="filter-beginner">初級</span>
                </button>
                <button class="filter-btn" onclick="filterLeaderboard('intermediate', this)">
                    <span id="filter-intermediate">中級</span>
                </button>
                <button class="filter-btn" onclick="filterLeaderboard('advanced', this)">
                    <span id="filter-advanced">高級</span>
                </button>
            </div>

            <div class="leaderboard-content">
                <table id="leaderboard-table">
                    <thead>
                        <tr>
                            <th>排名</th>
                            <th>玩家</th>
                            <th>難度</th>
                            <th>得分</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 排行榜數據將由 JavaScript 動態生成 -->
                    </tbody>
                </table>
            </div>
            <button id="back-btn" class="btn btn-primary" onclick="backToStart()">返回遊戲</button>
        </div>

        <!-- 世界地圖畫面 -->
        <div id="world-map-screen" class="hidden">
            <h2>🗺️ 世界地圖解鎖進度</h2>
            <p class="map-subtitle">通過關卡，逐步解鎖全世界！</p>

            <div class="world-map-container">
                <div class="world-map">
                    <!-- 地圖區域將由 JavaScript 動態生成 -->
                    <div class="map-region" id="region-asia" data-region="亞洲">
                        <div class="region-name">亞洲</div>
                        <div class="region-progress">0/20</div>
                    </div>
                    <div class="map-region" id="region-europe" data-region="歐洲">
                        <div class="region-name">歐洲</div>
                        <div class="region-progress">0/20</div>
                    </div>
                    <div class="map-region" id="region-africa" data-region="非洲">
                        <div class="region-name">非洲</div>
                        <div class="region-progress">0/20</div>
                    </div>
                    <div class="map-region" id="region-north-america" data-region="北美洲">
                        <div class="region-name">北美洲</div>
                        <div class="region-progress">0/20</div>
                    </div>
                    <div class="map-region" id="region-south-america" data-region="南美洲">
                        <div class="region-name">南美洲</div>
                        <div class="region-progress">0/20</div>
                    </div>
                    <div class="map-region" id="region-oceania" data-region="大洋洲">
                        <div class="region-name">大洋洲</div>
                        <div class="region-progress">0/20</div>
                    </div>
                </div>

                <div class="unlock-stats">
                    <h3>解鎖統計</h3>
                    <div class="stat-item">
                        <span>通過關卡：</span>
                        <span id="stages-completed">0 / 20</span>
                    </div>
                    <div class="stat-item">
                        <span>已解鎖國家：</span>
                        <span id="countries-unlocked">0 / 87</span>
                    </div>
                    <div class="stat-item">
                        <span>總完成度：</span>
                        <span id="total-completion">0%</span>
                    </div>
                </div>
            </div>

            <button id="back-from-map-btn" class="btn btn-primary" onclick="closeWorldMap()">返回</button>
        </div>
    </div>

    <script src="script.js?v=20241206002"></script>
</body>
</html>
